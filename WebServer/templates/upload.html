<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width,height=device-height,inital-scale=1.0,maximum-scale=1.0," charset="utf-8" />
   <title>Banner上传</title>
    {% load staticfiles %}
   <link href="{% static "css/bootstrap.min.css" %}" rel="stylesheet">
     <link href="{% static "css/fileinput.min.css" %}" rel="stylesheet">
    <script src="{% static "js/jquery-2.2.3.min.js" %}" ></script>
    <script src="{% static "js/bootstrap.min.js" %}"></script>
    <script src="{% static "js/commond.js" %}"></script>
    <script src="{% static "js/fileinput.min.js" %}"></script>
    <script src="{% static "js/fileinput_locale_zh.js" %}"></script>


</head>
<body>
<div class="alert alert-danger" style="display: none" id="alert_tip"></div>



<div class="container">
    <br>
    <label class="control-label">填写url地址</label>
    <input type="text" class="form-control" placeholder="填写要打开的url地址" id="input_url">
    <br>
<label class="control-label">选择图片</label>
<input id="input" type="file" class="file">


<script>
    $("#input").fileinput({
    language: "zh",
    uploadUrl: "upload",
    allowedFileExtensions: ["jpg", "png", "gif","jpeg"],
         uploadExtraData: function() {  // callback example
        var out = {};
        out['url'] = $('#input_url').val();
        return out;
    }
}).on('filebatchpreupload', function(event, data) {
        if($('#input_url').val() == '')
        {
            string = "请输入url地址!";
            return {
            message: string, // upload error message
            data:{} // any other data to send that can be referred in `filecustomerror`
        };
        }

}).on('fileuploaded', function(event, data) {
    if(data.response.code == 0){
        showAlert(data.response.msg);
    }
     else{
       window.location.href = "../banner";
    }
});;
</script>
    </div>
</body>
</html>

